(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(t,e,a){},45:function(t,e,a){},68:function(t,e,a){},69:function(t,e,a){},70:function(t,e,a){},71:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),i=a(19),r=a.n(i),s=a(11),o=(a(44),a(13)),l=a(4),d=a(12),u=(a(45),a(5)),j=a.n(u),b="SET_AUTHENTICATED",p="SET_UNAUTHENTICATED",h="SET_USER",O="LOADING_USER",f="SET_ERRORS",g="LOADING_LIST",x="GET_LIST",m="UPDATE_LIST",v="DELETE_LIST",y="CREATE_LIST",E="LOADING_UI",N="CREATE_CARD",C="DELETE_CARD",_=function(){return function(t){t({type:O}),j.a.get("http://localhost:8000/api/user").then((function(e){t({type:h,payload:e.data})})).catch((function(t){console.log(t)}))}},w=function(){return function(t){localStorage.removeItem("mashDBToken"),delete j.a.defaults.headers.common.Authorization,t({type:p})}},T=function(t){var e="Bearer ".concat(t);localStorage.setItem("idToken",e),j.a.defaults.headers.common.Authorization=e},S=a(1);var I=Object(s.b)((function(t){return{authenticated:t.user.authenticated,loading:t.user.loading,errors:t.user.errors}}),{loginUser:function(t,e){return function(a){a({type:E}),j.a.post("http://localhost:8000/api/login",t).then((function(t){T(t.data.idToken),a(_()),e.push("/")})).catch((function(t){console.log(t.response.data),a({type:f,payload:t.response.data})}))}}})((function(t){var e=t.loginUser,a=t.authenticated,c=t.loading,i=t.errors,r=Object(l.f)(),s=Object(n.useState)(""),u=Object(d.a)(s,2),j=u[0],b=u[1],p=Object(n.useState)(""),h=Object(d.a)(p,2),O=h[0],f=h[1];return Object(n.useEffect)((function(){!c&&a&&r.replace("/")}),[a,c,r]),Object(S.jsxs)("div",{className:"form",children:[Object(S.jsx)("h3",{children:"Login"}),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("label",{for:"email",children:Object(S.jsx)("b",{children:"Email"})}),Object(S.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",onChange:function(t){return b(t.target.value)},required:!0}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.email}),Object(S.jsx)("label",{for:"psw",children:Object(S.jsx)("b",{children:"Password"})}),Object(S.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",required:!0,onChange:function(t){return f(t.target.value)}}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.password}),Object(S.jsx)("button",{className:"button",onClick:function(){e({email:j,password:O},r)},type:"submit",children:"Login"}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.error})]}),Object(S.jsxs)("span",{children:["Don't have an account, ",Object(S.jsx)(o.b,{to:"/signup",children:"Click here"})]})]})}));var L=Object(s.b)((function(t){return{authenticated:t.user.authenticated,loading:t.user.loading,errors:t.user.errors}}),{signupUser:function(t,e){return function(a){a({type:E}),j.a.post("http://localhost:8000/api/signup",t).then((function(t){T(t.data.idToken),a({type:h,payload:t.data}),e.push("/")})).catch((function(t){console.log(t.response.data),a({type:f,payload:t.response.data})}))}}})((function(t){var e=t.signupUser,a=t.loading,c=t.authenticated,i=t.errors,r=Object(l.f)(),s=Object(n.useState)(""),u=Object(d.a)(s,2),j=u[0],b=u[1],p=Object(n.useState)(""),h=Object(d.a)(p,2),O=h[0],f=h[1],g=Object(n.useState)(""),x=Object(d.a)(g,2),m=x[0],v=x[1];return Object(n.useEffect)((function(){!a&&c&&r.replace("/")}),[c,a,r]),Object(S.jsxs)("div",{className:"form",children:[Object(S.jsx)("h3",{children:"Signup"}),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("label",{for:"email",children:Object(S.jsx)("b",{children:"Email"})}),Object(S.jsx)("input",{type:"text",placeholder:"Enter Email",name:"email",onChange:function(t){return b(t.target.value)},required:!0}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.email}),Object(S.jsx)("label",{for:"psw",children:Object(S.jsx)("b",{children:"Password"})}),Object(S.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",onChange:function(t){return f(t.target.value)},required:!0}),Object(S.jsx)("label",{for:"psw",children:Object(S.jsx)("b",{children:"Confirm Password"})}),Object(S.jsx)("input",{type:"password",placeholder:"Re enter Password",name:"psw",onChange:function(t){return v(t.target.value)},required:!0}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.confirmPassword}),Object(S.jsx)("button",{className:"button",onClick:function(){e({email:j,password:O,confirmPassword:m},r)},type:"submit",children:"Signup"}),Object(S.jsx)("p",{className:"error-alert",children:null===i||void 0===i?void 0:i.error})]}),Object(S.jsxs)("span",{children:["Already have an account, ",Object(S.jsx)(o.b,{to:"/login",children:"Click here"})]})]})})),k=(a(68),a(69),a(70),function(){return function(t){t({type:g}),j.a.post("http://localhost:8000/api/list").then((function(e){t({type:y,payload:e.data})})).catch((function(t){console.log(t)}))}});var A=Object(s.b)(null,{deleteCard:function(t,e){return function(a){j.a.delete("http://localhost:8000/api/card/".concat(t,"/").concat(e)).then((function(t){a({type:C,payload:t.data})})).catch((function(t){console.log(t)}))}},updateCard:function(t){return function(e){j.a.put("http://localhost:8000/api/card",t).then((function(t){e({type:"UPDATE_CARD",payload:t.data})})).catch((function(t){console.log(t)}))}}})((function(t){var e=t.card,a=t.cardIdx,c=t.deleteCard,i=t.cardlistIdx,r=t.updateCard,s=void 0===e.title?"":e.title,o=void 0===e.description?"":e.description,l=Object(n.useState)(s),u=Object(d.a)(l,2),j=u[0],b=u[1],p=Object(n.useState)(o),h=Object(d.a)(p,2),O=h[0],f=h[1],g=function(){r({title:j,description:O,cardId:a})};return Object(S.jsxs)("div",{className:"task-card",draggable:!0,children:[Object(S.jsx)("button",{className:"card-remove-btn",onClick:function(){c(i,a)},children:"X"}),Object(S.jsx)("br",{}),Object(S.jsx)("label",{children:"Title"}),Object(S.jsx)("input",{name:"title",onChange:function(t){b(t.target.value),g()},className:"task-title",value:j,placeholder:"title"}),Object(S.jsx)("br",{}),Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("textarea",{rows:"4",cols:"15",name:"description",onChange:function(t){f(t.target.value),g()},className:"task-description",value:O,placeholder:"description"}),Object(S.jsx)("br",{})]})}));var D=Object(s.b)(null,{deleteList:function(t){return function(e){e({type:g}),e({type:v,payload:t}),j.a.delete("http://localhost:8000/api/list/".concat(t)).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}},updateList:function(t){return function(e){e({type:g}),j.a.put("http://localhost:8000/api/list",t).then((function(t){e({type:m,payload:t.data})})).catch((function(t){console.log(t)}))}},createList:k,createCard:function(t){return function(e){j.a.post("http://localhost:8000/api/card",t).then((function(t){e({type:N,payload:t.data})})).catch((function(t){console.log(t)}))}}})((function(t){var e=t.list,a=t.deleteList,c=t.cardlistIdx,i=t.updateList,r=t.createCard,s=e.cardList,o=void 0===e.listName?"":e.listName,l=Object(n.useState)(o),u=Object(d.a)(l,2),j=u[0],b=u[1];return Object(S.jsxs)("div",{className:"card-list",children:[Object(S.jsx)("input",{className:"card-list-name",onChange:function(t){b(t.target.value),i({listName:j,listId:c})},placeholder:"card list name",value:j}),Object(S.jsx)("button",{className:"listadd-btn",onClick:function(){a(c)},children:"Remove List"}),Object(S.jsx)("span",{className:"card-number",children:s.length}),Object(S.jsx)("div",{className:"card-list-container",children:s.map((function(t){return Object(S.jsx)(A,{card:t,cardIdx:t._id,cardlistIdx:c},t._id)}))}),Object(S.jsx)("button",{className:"card-add-btn",onClick:function(){r({listRef:c})},children:"+"})]})}));var U=Object(s.b)((function(t){return{authenticated:t.user.authenticated,loading:t.user.loading,lists:t.list.lists,loadingList:t.list.loading,user:t.user.email}}),{createList:k,getList:function(t){return function(e){e({type:g}),j.a.get("http://localhost:8000/api/list",t).then((function(t){e({type:x,payload:t.data})})).catch((function(t){console.log(t.response.data)}))}},logoutUser:w})((function(t){var e=t.authenticated,a=t.loading,c=t.createList,i=t.lists,r=t.getList,s=t.user,o=t.logoutUser,d=Object(l.f)();return Object(n.useEffect)((function(){a||e?r():d.replace("/login")}),[a,e,d,r]),Object(S.jsxs)("div",{className:"homepage-container",children:[Object(S.jsx)("button",{className:"listadd-btn",onClick:function(){c()},children:"Add List"}),Object(S.jsx)("button",{className:"logout-btn",onClick:function(){return o()},children:"log Out"}),Object(S.jsxs)("h3",{children:["User: ",s]}),Object(S.jsx)("div",{className:"cardlist-container",children:i.map((function(t){return Object(S.jsx)(D,{list:t,cardlistIdx:t._id},t._id)}))})]})}));var R=function(){return Object(S.jsx)(o.a,{children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/",children:Object(S.jsx)(U,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/login",children:Object(S.jsx)(I,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/signup",children:Object(S.jsx)(L,{})})]})})},P=a(35),q=a(18),G=a(36),z=a(3),B={authenticated:!1,loading:!1,errors:{}};var X=a(14),H={loading:!1,lists:[]};var J=[G.a],M=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.c,V=Object(q.b)({user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(z.a)(Object(z.a)({},t),{},{authenticated:!0,loading:!1});case p:return B;case O:return Object(z.a)(Object(z.a)({},t),{},{loading:!0});case h:return Object(z.a)({authenticated:!0,loading:!1},e.payload);case f:return Object(z.a)(Object(z.a)({},t),{},{loading:!1,errors:e.payload});default:return t}},list:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g:return Object(z.a)(Object(z.a)({},t),{},{loading:!0});case x:return Object(z.a)(Object(z.a)({},t),{},{loading:!1,lists:Object(X.a)(e.payload)});case m:var a=t.lists.findIndex((function(t){return t._id===e.payload._id}));return t.lists[a].listName=e.payload.listName,Object(z.a)(Object(z.a)({},t),{},{lists:Object(X.a)(t.lists),loading:!1});case y:return Object(z.a)(Object(z.a)({},t),{},{lists:[].concat(Object(X.a)(t.lists),[e.payload]),loading:!1});case v:var n=t.lists.filter((function(t){return t._id!==e.payload}));return Object(z.a)(Object(z.a)({},t),{},{lists:Object(X.a)(n),loading:!1});case N:console.log(e.payload);var c=t.lists.findIndex((function(t){return t._id===e.payload._id}));return t.lists[c]=e.payload,Object(z.a)(Object(z.a)({},t),{},{lists:Object(X.a)(t.lists)});case C:var i=t.lists.findIndex((function(t){return t._id===e.payload._id}));return t.lists[i]=e.payload,Object(z.a)(Object(z.a)({},t),{},{lists:Object(X.a)(t.lists)});default:return t}}}),F=Object(q.d)(V,M(q.a.apply(void 0,J))),K=localStorage.idToken;K&&(1e3*Object(P.a)(K).exp<Date.now()?(F.dispatch(w()),window.location.href="/login"):(F.dispatch({type:p}),j.a.defaults.headers.common.Authorization=K,F.dispatch(_())));r.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(s.a,{store:F,children:Object(S.jsx)(R,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.bc30e4c6.chunk.js.map